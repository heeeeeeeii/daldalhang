<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

	<mapper namespace="daldal.mappers.franchiseMapper">
	<!-- namespace : 자바클래스에서 mapper 를 찾는 경로
				  다른 mapper와 중복되지 않도록 네임스페이스 기재 -->
	
	<select id="selectList" resultType="vo.FranchiseVO">
		SELECT * FROM franchise ORDER BY frcode
	</select>

	<select id="selectOne" resultType="vo.FranchiseVO">
		SELECT frkname FROM franchise ORDER BY frcode
	</select>
	
	<select id="fsortList" resultType="vo.ProductVO">
		SELECT * FROM franchise f 
		JOIN product p ON f.frcode = p.frcode 
		WHERE f.frcode = #{frcode} ORDER BY p.pdseq;
	</select>
	
	<select id="fsortCount" resultType="int">
		SELECT COUNT(*) FROM franchise f 
		JOIN product p ON f.frcode = p.frcode 
		WHERE f.frcode = #{frcode} ORDER BY p.pdseq;
	</select>
	
	<select id = "franchiseMenu" resultType="vo.ProductVO">
		SELECT DISTINCT mname, f.frcode FROM franchise f 
		JOIN product p ON f.frcode = p.frcode 
		WHERE f.frcode = #{frcode} ORDER BY p.pdseq
	</select>
	
	<select id = "franchiseSubMenu" resultType="vo.ProductVO">
		SELECT * FROM franchise f 
		JOIN product p ON f.frcode = p.frcode 
		WHERE p.mname = #{mname} AND p.frcode = #{frcode} 
		ORDER BY p.pdseq
	</select>
	
	<select id = "franchiseSubCount" resultType="int">
		SELECT COUNT(*) FROM franchise f 
		JOIN product p ON f.frcode = p.frcode 
		WHERE p.mname = #{mname} AND p.frcode = #{frcode} 
		ORDER BY p.pdseq
	</select>
	
</mapper>